
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dates in python &#8212; blog  documentation</title>
    
  <link rel="stylesheet" href="../../../_static/css/index.e00ebc5fe59cde01733db895d987848c.css">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.88dc4f4c5bd3676d55da.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="author" title="About these documents" href="../../../about/" />
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
  
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  
  <link rel="alternate" type="application/atom+xml"  href="../../../blog/atom.xml" title="Predictably Noisy">
  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../../../">
      <img src="../../../_static/logo.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../about/">About me</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../projects/">Projects</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../publications/">Publications</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../../blog/">Blog</a>
        </li>
        
        
      </ul>


      <form class="bd-search d-flex align-items-center" action="../../../search/" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this site..." aria-label="Search this site..." autocomplete="off" >
</form>
      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/choldgraf/" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/choldgraf" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">
  
  
  <h2>
  
  <i class="fa fa-calendar"></i>
    16 March 2017
  
  </h2>

  <ul>
    

  

  

  

  
  <li id="category"><span><i class="fa-fw fa fa-folder-open"></i></span>
    
      
      <a href="../../../blog/category/dates/">dates</a>,
      
    
      
      <a href="../../../blog/category/formatting/">formatting</a>
      
    </li>
  

  
  <li id="tags"><span><i class="fa-fw fa fa-tags"></i>
      </span>
    
      
      <a href="../../../blog/tag/python/">python</a>
      
    
      
      <a href="../../../blog/tag/open-science/">open science</a>
      
    </li>
  
  
  <li id="comments">
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'chrisholdgraf'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
    <i class="fa-fw fa fa-comments"></i>
    <a href="#disqus_thread" data-disqus-identifier="/posts/2017/2017-03-16-dates_in_python/"> </a>
  </li>
  
  </ul>

  <h3><a href="../../../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../../2020/2020-01-22-rst-thoughts/">22 January - What do people think about rST?</a></li>
    
      <li><a href="../../2019/2019-11-11-ipynb_pandoc/">11 November - Testing Pandoc and Jupyter Notebooks</a></li>
    
      <li><a href="../../2019/2019-10-27-jupyter-governance-python/">27 October - What would Python-style governance look like in Jupyter?</a></li>
    
      <li><a href="../../2019/2019-10-22-xarray-neuro/">22 October - Analyzing intracranial electrophysiology data with xarray</a></li>
    
      <li><a href="../../2019/2019-10-13-rust-jupyter-governance/">13 October - What would Rust-style governance look like in Jupyter?</a></li>
    
  </ul>

  <h3><a href="../../../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../../blog/2020/">2020 (1)</a></li>
    
  
    
    <li><a href="../../../blog/2019/">2019 (8)</a></li>
    
  
    
    <li><a href="../../../blog/2018/">2018 (1)</a></li>
    
  
    
    <li><a href="../../../blog/2017/">2017 (3)</a></li>
    
  
    
    <li><a href="../../../blog/2016/">2016 (6)</a></li>
    
  
    
    <li><a href="../../../blog/2015/">2015 (4)</a></li>
    
  
  </ul>

          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#" class="nav-link">Dates in python</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#useful-links" class="nav-link">Useful links</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#a-quick-tour-of-our-tools" class="nav-link">A quick tour of our tools</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#datetime" class="nav-link">Datetime</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#extra-components-of-datetime-objects" class="nav-link">Extra components of datetime objects</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#datetimes-in-pandas" class="nav-link">Datetimes in pandas</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#parsing-strings-as-a-date" class="nav-link">Parsing strings as a date</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#iso-8601" class="nav-link">ISO 8601</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#arbitrary-strings" class="nav-link">Arbitrary strings</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#printing-strings" class="nav-link">Printing strings</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#and-that-s-it-sort-of" class="nav-link">And that’s it…sort of</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="dates-in-python">
<h1>Dates in python<a class="headerlink" href="#dates-in-python" title="Permalink to this headline">¶</a></h1>
<p>As a part of setting up the website for the <a class="reference external" href="http://docathon.org">Docathon</a> I’ve had to re-learn all of my date string formatting rules. It’s one of those little problems you don’t really think about - turning an arbitrary string into something structured like a date - until you’ve actually got to do it.</p>
<p>There are a bunch of tools in python for using date-like objects, but it’s not always easy to figure out how these work. This post is just a couple of pieces of information I’ve picked up along the process.</p>
<div class="section" id="useful-links">
<h2>Useful links<a class="headerlink" href="#useful-links" title="Permalink to this headline">¶</a></h2>
<p>Here’s a list of useful links I’ve picked up, which I’ll mention below:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://strftime.org/">strftime.org</a> for remembering how date string formatting works.</p></li>
<li><p><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html">The pandas datetime docs</a></p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">A list of time zone names</a></p></li>
<li><p><a class="reference external" href="https://www.w3.org/TR/NOTE-datetime">ISO 8601</a> format explanation</p></li>
</ul>
</div>
</div>
<div class="section" id="a-quick-tour-of-our-tools">
<h1>A quick tour of our tools<a class="headerlink" href="#a-quick-tour-of-our-tools" title="Permalink to this headline">¶</a></h1>
<p>In this post we’ll focus on two main tools for date functionality: the datetime module and pandas.</p>
<div class="section" id="datetime">
<h2>Datetime<a class="headerlink" href="#datetime" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<p>The datetime module is our core definition of how to represent dates in python. We can call datetime directly with a bunch of integers as input, representing years, months, days, etc:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">date</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>datetime.datetime(2016, 3, 3, 12, 12, 12)
</pre></div>
</div>
</div>
</div>
<p>We can access components of this date object as attributes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="o">.</span><span class="n">day</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">attrs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="n">attrs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">ii</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>---

year 2016

---

month 2

---

day 12
</pre></div>
</div>
</div>
</div>
<div class="section" id="extra-components-of-datetime-objects">
<h3>Extra components of datetime objects<a class="headerlink" href="#extra-components-of-datetime-objects" title="Permalink to this headline">¶</a></h3>
<p>We can also access specific sub-components of the datetime (that is, either the <strong>date</strong> or the <strong>time</strong>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>datetime.date(2016, 3, 3)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>datetime.time(12, 12, 12)
</pre></div>
</div>
</div>
</div>
<p>Datetime objects also have <strong>timezones</strong>. You can check whether our object already has a timezone with the <code class="docutils literal notranslate"><span class="pre">tzinfo</span></code> attribute:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="o">.</span><span class="n">tzinfo</span>
</pre></div>
</div>
</div>
</div>
<p>As we can see, there’s nothing in there because we didn’t specify a timezone when we created this object. We need to add a timezone first.</p>
<p>However, once you start using timezones it is useful to use a more powerful package like pandas. Let’s do a quick intro:</p>
</div>
</div>
<div class="section" id="datetimes-in-pandas">
<h2>Datetimes in pandas<a class="headerlink" href="#datetimes-in-pandas" title="Permalink to this headline">¶</a></h2>
<p>Pandas (among many, many other things) adds some extra functionality on top of datetime. The most useful function for this is probably <code class="docutils literal notranslate"><span class="pre">to_datetime</span></code>. This will try to be clever about whatever the input is, which lets us do things like give it strings:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2017-03-01&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Class: &#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="n">date</span><span class="p">),</span> <span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Class:  &amp;ltclass &#39;pandas.tslib.Timestamp&#39;&amp;gt | 2017-03-01 00:00:00
</pre></div>
</div>
</div>
</div>
<p>Note that this isn’t the same object as the datetime object, but we can usually treat them similarly. It also exposes several new methods that can do useful things, like changing the timezone of our datetime object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="n">date</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2017-03-01 00:00:00+0000&#39;, tz=&#39;UTC&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;timezone: &#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>timezone:  UTC
</pre></div>
</div>
</div>
</div>
<p>We used a time zone called “UTC”. That stands for “Coordinated Universal Time”, which is basically the global standard for the “base” time. All other timezones are expressed in reference to this base time. For example, let’s now convert our time to PST:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Pacific&#39;</span><span class="p">)</span>
<span class="n">date</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2017-02-28 16:00:00-0800&#39;, tz=&#39;US/Pacific&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;timezone: &#39;</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>timezone:  US/Pacific
</pre></div>
</div>
</div>
</div>
<p>Notice how we now see the <code class="docutils literal notranslate"><span class="pre">-0800</span></code> at the end. This tells us what kind of offset the ‘US/Pacific’ timezone is from ‘UTC’. It’s expressed as <code class="docutils literal notranslate"><span class="pre">-mmss</span></code>, where <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">=</span> <span class="pre">minute</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">second</span></code></p>
<p>One of the really nice things about pandas is that we can represent <strong>ranges</strong> in python. Let’s generate a range of dates below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The `freq` parameter tells us the size of the jump between items</span>
<span class="n">freq</span> <span class="o">=</span> <span class="s1">&#39;H&#39;</span>  <span class="c1"># H == hours, D == days</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2017-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-03-05&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="n">dates</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2017-03-01 00:00:00+00:00&#39;, &#39;2017-03-01 01:00:00+00:00&#39;,
               &#39;2017-03-01 02:00:00+00:00&#39;, &#39;2017-03-01 03:00:00+00:00&#39;,
               &#39;2017-03-01 04:00:00+00:00&#39;],
              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;H&#39;)
</pre></div>
</div>
</div>
</div>
<p>This lets us do several things, such as create masks for any data we have:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">&lt;</span> <span class="s2">&quot;2017-03-02&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ True,  True,  True,  True,  True,  True,  True,  True,  True,
        True,  True,  True,  True,  True,  True,  True,  True,  True,
        True,  True,  True,  True,  True,  True, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False, False, False,
       False, False, False, False, False, False, False], dtype=bool)
</pre></div>
</div>
</div>
</div>
<p>It also lets us plot things across dates:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2017-03-06&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="n">sr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dates</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">)</span>
<span class="n">sr</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>  <span class="c1"># Give us a 30 hour rolling mean</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/2017-03-16-dates_in_python_25_1.png" src="../../../_images/2017-03-16-dates_in_python_25_1.png" />
</div>
</div>
<p>Note that if we now change the timezone, some of the days have changed because of the time shift:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Original times</span>
<span class="n">dates</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2017-01-01 00:00:00+00:00&#39;, &#39;2017-01-01 01:00:00+00:00&#39;,
               &#39;2017-01-01 02:00:00+00:00&#39;, &#39;2017-01-01 03:00:00+00:00&#39;,
               &#39;2017-01-01 04:00:00+00:00&#39;],
              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;H&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># New times</span>
<span class="n">dates</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Pacific&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DatetimeIndex([&#39;2016-12-31 16:00:00-08:00&#39;, &#39;2016-12-31 17:00:00-08:00&#39;,
               &#39;2016-12-31 18:00:00-08:00&#39;, &#39;2016-12-31 19:00:00-08:00&#39;,
               &#39;2016-12-31 20:00:00-08:00&#39;],
              dtype=&#39;datetime64[ns, US/Pacific]&#39;, freq=&#39;H&#39;)
</pre></div>
</div>
</div>
</div>
<p>For more information about date objects in pandas, check out:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html">The pandas datetime docs</a></p></li>
</ul>
<p>And this is useful for figuring out how to convert between timezones:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">A list of time zone names</a></p></li>
</ul>
</div>
</div>
<div class="section" id="parsing-strings-as-a-date">
<h1>Parsing strings as a date<a class="headerlink" href="#parsing-strings-as-a-date" title="Permalink to this headline">¶</a></h1>
<div class="section" id="iso-8601">
<h2>ISO 8601<a class="headerlink" href="#iso-8601" title="Permalink to this headline">¶</a></h2>
<p>So how is pandas doing all of these string auto-conversions? Well, there are a few string structures that are classically defined as date-like structures. For example, the <code class="docutils literal notranslate"><span class="pre">yyyy-mm-dd</span></code> string I gave above looks fairly straightforward for a date.</p>
<p>What if we wanted to do something more complex with strings? For this, we use the <a class="reference external" href="https://www.w3.org/TR/NOTE-datetime">ISO 8601</a>. It takes the following form:</p>
<p><code class="docutils literal notranslate"><span class="pre">YYYY-MM-DDThh:mm:ss</span></code>.</p>
<p>Most of these are pretty self-explanatory, but of note is the <code class="docutils literal notranslate"><span class="pre">Z</span></code> at the end. This simply says that there is zero offset for this datetime, AKA it is “UTC” time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2017-03-01T12:34:02Z&#39;</span><span class="p">)</span>
<span class="n">date</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2017-03-01 12:34:02&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="arbitrary-strings">
<h3>Arbitrary strings<a class="headerlink" href="#arbitrary-strings" title="Permalink to this headline">¶</a></h3>
<p>We can also tell pandas how to parse an arbitrary date string. For this, we use placeholders representing different components of the date, and then construct a “parsing string” that we give to the function. This tells the function how to turn input strings into datetime objects. For example, let’s say we have this string:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date_string</span> <span class="o">=</span> <span class="s1">&#39;02/2016/12&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>This is a little tricky, because it’s unclear which is the month and which is the day. By specifying a date parsing string, we can easily parse this. The placeholders that we use are in the <a class="reference external" href="http://strftime.org/">strftime</a> website linked above. Here are some useful ones:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%Y</span></code> = year</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%m</span></code> = month</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span></code> = day</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date_string</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%m/%Y/</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">date</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2016-02-12 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<p>Above we told pandas to parse the date string as <code class="docutils literal notranslate"><span class="pre">{month}/{year}/{day}</span></code>. We can do this with any string structure we like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a complicated date string</span>
<span class="n">date_string</span> <span class="o">=</span> <span class="s1">&#39;02/2016/12 and the time is 11 hr 04 min and 02 sec&#39;</span>

<span class="c1"># And tell `to_datetime` how to parse it</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">date_string</span><span class="p">,</span>
                      <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%m/%Y/</span><span class="si">%d</span><span class="s1"> and the time is %H hr %M min and %S sec&#39;</span><span class="p">)</span>
<span class="n">date</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2016-02-12 11:04:02&#39;)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="printing-strings">
<h3>Printing strings<a class="headerlink" href="#printing-strings" title="Permalink to this headline">¶</a></h3>
<p>The same principle can be applied to printing strings. Any datetime object has a method called <code class="docutils literal notranslate"><span class="pre">strftime</span></code>. This lets you create a <strong>string</strong> from <strong>time</strong>. You can pass a similar date parsing string to what we used above, and it will tell the object what kind of string to create:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y/%m and </span><span class="si">%d</span><span class="s1"> days&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;2016/02 and 12 days&#39;
</pre></div>
</div>
</div>
</div>
<p>You can also use this to do some nice formatting, e.g.:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%A, %B </span><span class="si">%d</span><span class="s1">, %Y&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Friday, February 12, 2016&#39;
</pre></div>
</div>
</div>
</div>
<p>You can also pass these parsing strings to the <code class="docutils literal notranslate"><span class="pre">format</span></code> method of python strings. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mystring</span> <span class="o">=</span> <span class="s2">&quot;Today&#39;s date is...{:%A, %B </span><span class="si">%d</span><span class="s2">, %Y}&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mystring</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Today&#39;s date is...Friday, February 12, 2016
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="and-that-s-it-sort-of">
<h2>And that’s it…sort of<a class="headerlink" href="#and-that-s-it-sort-of" title="Permalink to this headline">¶</a></h2>
<p>In reality this is the tip of the iceberg when it comes to using datetime objects, but this should be enough to get you started. Make sure that any time you read in new data, you double check whether it is timezone encoded. If it isn’t, then figure out what timezone you can assume (often it is UTC), and encoding it yourself to avoid confusion.</p>
<p>Datetime objects are incredibly useful, but can be a little confusing, so I hope this helps clear some things up!</p>
</div>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  
  <a href="../2017-01-04-matplotlib_cycles/">
    <i class="fa fa-arrow-circle-left"></i>
    Matplotlib Cyclers are Great
  </a>
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  
  <a href="../2017-11-02-dates_multiple_plots/">
    Combining dates with analysis visualization in python
    <i class="fa fa-arrow-circle-right"></i>
  </a>
  
  </span>
</div>

  
  
    <div class="section">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'chrisholdgraf';
        var disqus_identifier = '/posts/2017/2017-03-16-dates_in_python/';
        var disqus_title = 'Dates in python';
        var disqus_url = 'https://predictablynoisy.com/posts/2017/2017-03-16-dates_in_python';

        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  
  </div>

              </div>
              
              
              <div class='prev-next-bottom'>
                

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../../_static/js/index.88dc4f4c5bd3676d55da.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-88310237-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2020, Chris Holdgraf.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>